{% extends "client/base.html" %}

{% block content %}

<div class = "ui container">
    
    <!-- Availabe datasets -->
    {% if datasets | length > 0 %}

        <h4 class="ui horizontal divider header">
            Available Dataset
        </h4>
        <table class="ui compact celled table">
            <thead>
                <tr>
                <th class="twelve wide">Dataset</th>
                <th class="four wide">File Count</th>
                <th class="four wide">Status</th>
                </tr>
            </thead>
            <tbody>
                <!-- Render the dataset -->
                <!-- id, name, description , file_count, total: sql fields -->
                {% for data in datasets %}
                    <tr>
                        <td><a href="{{ url_for('client.dataset_with_id', dset_id=data['id']) }}">{{ data['name'] }}</a></td>
                        <td>{{ data['file_count'] }}</td>

                        <!-- Conditionally render approved, processing, request td element -->
                        <td></td>
                    </tr>
                {% endfor %}

            </tbody>
            <tfoot class="full-width">
                <tr>
                <th colspan="4">
                    <!-- Render pagination for other datasets -->
                    <div class="ui right floated pagination menu">
                        {% if page > 0 %}
                            <!-- Calculate the prev page and use as a link -->
                            {% set link = page-1 %}
                            <a href="{{ url_for('client.all_datasets', page=link) }}" class="active item">Prev</a>
                        {% endif %}

                        <!-- Page*limit must be less than total no. of datasets -->
                        {% if page*20 < total %}
                            <!-- Calculate the next page and use as a link -->
                            {% set link = page+1 %}
                            <a href="{{ url_for('client.all_datasets', page=link) }}" class="item">Next</a>
                        {% endif %}
                    </div>
                </th>
                </tr>
            </tfoot>
        </table>
    {% endif %}

</div>
{% endblock %}